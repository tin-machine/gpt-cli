# 概要

ChatGPTに度々問い合わせを行っているのですが、
viで書いたテキストを貼り付ける事が多いので、CLIから問い合わせできたら楽だな、という発想のコマンドです。

# インストール

```
go install github.com/tin-machine/gpt-cli@latest
```

[環境変数 OPEN_API_KEY にChatGPTのAPIキーを設定してください](https://github.com/tin-machine/gpt-cli/blob/21c4889a98cda54f3dc222bf32c00f02e26a11f0/openai_client.go#L17)

# 使い方

```
gpt-cli -p prompt1
```

# オプション

取り得るオプションですが
- `-s`: システムプロンプトで文字列を与えたい(config.yamlを上書き)
- `-u`: ユーザープロンプトで文字列を与えたい(config.yamlを上書き)
- `-p`: config.yaml内でベースとなるプロンプトを選択
  - `-p` が無い場合は `-s` か `-u` が必要
- `-i`: イメージファイルをカンマ区切りで与える
- `-c`: config.yamlのパスを指定
- `-m`: モデルを指定
- `-d`: デバックモード
- `-v`: バージョン
- `-collect`: 現在のディレクトリ内のファイルをUserプロンプトに追加
- `-history`: 会話履歴の保存ファイルを指定（拡張子は不要）
- `-t`: タイムアウト時間（秒）を指定
- `-f`: 読み込むファイルのパスをカンマ区切りで指定
- -show-history: 会話履歴を表示

# config.yamlのサンプル

~/.config/gpt-cli/config.yaml に配置してください

```
prompts:
  prompt1:
    model: gpt-4o
    system: |
      "深呼吸し順番にゆっくり考えてみてください。出力するの最終的なものだけにしてください(途中の考えてほしい段階は出力しないでください)"
      "次の文章はランダムなタスクになっています。文章すべて最後まで読み込み"
      "タスクを分析、分解し、依存関係を考えて私が次に行うべき重要なタスクを3個ピックアップ、そのタスクを行う事で可能になる未来を考え楽しくなるように話をふくらませるようにしてください。"
      "最終的にボリュームのある一つの文章にまとめて300文字以内で出力してください。"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt2:
    model: gpt-4o
    system: |
      "ずんだもんっぽい文章にしてください、その際、変換するなどの作業工程は省き、喋っているように内容だけ出力してください"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt3:
    model: gpt-4o
    system: |
      "動作確認です。添付ファイルは存在するでしょうか?またどんなファイルでしょうか?画像ファイルの場合、内容について日本語で表現して欲しいです"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt4:
    model: gpt-4o
    system: |
      "ソースコードのレビューをお願いします。何か改善点を日本語で複数あげてほしいです。"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt5:
    model: gpt-4o
    system: |
      次のプログラムの改修点をいくつかあげてください。
      複数ある場合、ファイルごとに指摘事項をあげてください。
      ソースコードを出力する場合、ソースコード全てを出力してください。
    user: |
      -uオプションで必要なソースコードを上書きする
```
