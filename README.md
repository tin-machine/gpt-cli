# 概要

ChatGPTに度々問い合わせを行っているのですが、
viで書いたテキストを貼り付ける事が多いので、CLIから問い合わせできたら楽だな、という発想のコマンドです。

# インストール

```
go install github.com/tin-machine/gpt-cli@latest
```

# 使い方

```
gpt-cli -p prompt1 -o output.txt
```

# オプション

取り得るオプションですが
- `-p`: config.yaml内でベースとなるプロンプトを選択
- `-s`: システムプロンプトで文字列を与えたい(config.yamlを上書き)
- `-u`: ユーザープロンプトで文字列を与えたい(config.yamlを上書き)
- `-i`: イメージファイルをカンマ区切りで与える(config.yamlを上書き)
- `-a`: 追加する文章へのパスを指定します。
- `-o`: 出力するファイル名
- `-d`: デバックモード

`-p` での指定が無い場合、`-s` か `-u` が必要。

# config.yamlのサンプル

~/.config/gpt-cli/config.yaml に配置してください

```
prompts:
  prompt1:
    system: |
      "深呼吸し順番にゆっくり考えてみてください。出力するの最終的なものだけにしてください(途中の考えてほしい段階は出力しないでください)"
      "次の文章はランダムなタスクになっています。文章すべて最後まで読み込み"
      "タスクを分析、分解し、依存関係を考えて私が次に行うべき重要なタスクを3個ピックアップし、そのタスクを行う事で可能になる未来を考え楽しくなるように話をふくらませるようにしてください。最終的にボリュームのある一つの文章にまとめて300文字以内で出力してください。"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt2:
    system: |
      "ずんだもんっぽい文章にしてください、その際、変換するなどの作業工程は省き、喋っているように内容だけ出力してください"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt3:
    system: |
      "動作確認です。添付ファイルは存在するでしょうか?またどんなファイルでしょうか?画像ファイルの場合、内容について日本語で表現して欲しいです"
    user: |
      -uオプションで必要なソースコードを上書きする
  prompt4:
    system: |
      "ソースコードのレビューをお願いします。何か改善点を日本語で複数あげてほしいです。"
    user: |
      -uオプションで必要なソースコードを上書きする
```

# 手軽にuserプロンプトを生成したい

カレントディレクトリのGolangのファイルをレビューして欲しい場合

file-output.bash みたいなファイルを作成し

```bash
#!/bin/bash

for file in $(ls *.go) ; do
  echo -e "${file}の内容です"
  echo '```golang'
  cat $file
  echo -e '```\n'
done
```

下記のようにすると手軽にレビューしてもらえます

```
gpt-cli -p prompt4 -u "$( ./file-output.bash )"  -o prompt3.log
```
